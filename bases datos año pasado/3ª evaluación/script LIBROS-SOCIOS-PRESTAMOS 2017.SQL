-- *********************************
-- * TABLAS LIBROS, SOCIOS Y PR…STAMOS *********************
-- *********************************


DROP TABLE LIBROS CASCADE CONSTRAINTS; 
DROP TABLE SOCIOS CASCADE CONSTRAINTS; 
DROP TABLE PRESTAMOS CASCADE CONSTRAINTS; 

-- ************ CREACI‡N DE TABLAS: *********************

CREATE TABLE LIBROS
( COD_LIBRO VARCHAR2(10) PRIMARY KEY,
  TITULO VARCHAR2(50),
  AUTOR VARCHAR2(30),
  TEMA VARCHAR2(15),
  UNIDADES NUMBER(3)
) ;
-----------------------------------------------------------------

CREATE TABLE SOCIOS
( COD_SOCIO  NUMBER(6) PRIMARY KEY,
  NOMBRE VARCHAR2(30),
  DIRECCION VARCHAR2(30),
  PROVINCIA VARCHAR2(15),
  TLF NUMBER(9)
);

------------------------------------------------------------------
CREATE  TABLE PRESTAMOS
(
  COD_SOCIO NUMBER(6),
  COD_LIBRO VARCHAR2(10),
  FECHA_PRESTAMOS DATE, 
  CONSTRAINT PK_PRESTAMOS PRIMARY KEY(COD_SOCIO, COD_LIBRO),
  CONSTRAINT FK1_PRESTAMOS FOREIGN KEY(COD_LIBRO) REFERENCES LIBROS,
  CONSTRAINT FK2_PRESTAMOS FOREIGN KEY(COD_SOCIO) REFERENCES SOCIOS
);

-----------------------------------------------------------------
--------------- LLENAR LIBROS: -------------------------------
INSERT INTO LIBROS VALUES('IG-110','GUIA DE MICROSOFT WORKS 3','HARLEY HAHN','WORKS', 
6) ;
INSERT INTO LIBROS VALUES('IG-111','MICROSOFT WORKS 3','JOANNE WOODCOCK','WORKS',4);
INSERT INTO LIBROS VALUES('IG-112','MANUAL DE BORLAND C++ 4.0','ANGULO, JOSE MARIA', 
'LENGUAJE C',10);
INSERT INTO LIBROS VALUES('IG-113','MICROPROCESADORES 32 BITS','ANGULO, JOSE MARIA', 
'ARQUITECTURA',5);
INSERT INTO LIBROS VALUES('IG-114','COMPUTADORAS 5a GENERACION','BISHOP, PETER',  
'ARQUITECTURA', 6);
INSERT INTO LIBROS VALUES('IG-115','LIBRO DE EXCEL 97','JOHN WALKENBACH','EXCEL',7);
INSERT INTO LIBROS VALUES('IG-116','EXCEL 4 PARA WINDOWS-(99%)','SUSANA LINARES', 
'EXCEL', 10);
INSERT INTO LIBROS VALUES('IG-117','APLIQUE TURBO C++','SCHILDT H.','LENGUAJE C',4);
INSERT INTO LIBROS VALUES('IG-118','PROGRAMACION EN C++','ENRIQUE Y JOSE HERNANDEZ', 
'LENGUAJE C',6);
INSERT INTO LIBROS VALUES('IG-119','PUESTA A PUNTO DE ORACLE','ABBEY, J COREY', 
'ORACLE',5);
INSERT INTO LIBROS VALUES('IG-120','ORACLE 7. MANUAL DE REFERENCIA','GEORGE KOCH', 
'ORACLE',8);
INSERT INTO LIBROS VALUES('IG-121','ORACLE GUIA DE APRENDIZAJE 7','ABBEY, J COREY', 
'ORACLE',9);
INSERT INTO LIBROS VALUES('IG-122','TECNICAS DE PROGRAMACION','F. ALONSO', 
'PROGRAMACION',8);
INSERT INTO LIBROS VALUES('IG-123','METODOLOGIA DE LA PROGRAMACION','D. ALONSO Y S. 
RUMEU', 'PROGRAMACION',5);
INSERT INTO LIBROS VALUES('IG-124','PROGRAMACION ORIENTADA A OBJ','MORALES Y 
SEGOVIA', 'PROGRAMACION',7);



-----------------------------------------------------------
------------ LLENAR SOCIOS: ---------------------------
INSERT INTO SOCIOS VALUES(200,'JUAN MARTINEZ','LA ALAMEDA 15','MADRID',91667666);
INSERT INTO SOCIOS VALUES(210,'PEDRO PEREZ','LA HOSPEDERIA, 5','TOLEDO',45867666);
INSERT INTO SOCIOS VALUES(220,'ANA GARCIA','DEL HOSPITAL, 10','VALENCIA',96657666);
INSERT INTO SOCIOS VALUES(223,'JAVIER SANCHEZ','LOS BARRIOS S/N','TOLEDO',92567666);
INSERT INTO SOCIOS VALUES(226,'ALICIA MORALES','LA MARIPOSA 89','MADRID',91987666);
INSERT INTO SOCIOS VALUES(229,'JUANA LOPEZ','EL SALTAMONTES 315','MADRID',97167966);
INSERT INTO SOCIOS VALUES(230,'FRANCISCO PONCE','LA MARCHA, 21','MADRID',91445566);



-----------------------------------------------------------
------------ LLENAR PRESTAMOS: ---------------------------
-- SE CAMBIA LA FECHA PARA ALMACENAR EL A—O CORRECTAMENTE

ALTER SESSION SET NLS_DATE_FORMAT = 'DD/MM/YYYY';

INSERT INTO PRESTAMOS VALUES(200,'IG-114','10/05/2016');
INSERT INTO PRESTAMOS VALUES(200,'IG-117','16/04/2017');
INSERT INTO PRESTAMOS VALUES(200,'IG-119','17/02/2017');

INSERT INTO PRESTAMOS VALUES(210,'IG-115','8/05/2017');
INSERT INTO PRESTAMOS VALUES(210,'IG-117','10/03/2015');
INSERT INTO PRESTAMOS VALUES(210,'IG-120','12/04/2017');
INSERT INTO PRESTAMOS VALUES(210,'IG-121','08/05/2017');

INSERT INTO PRESTAMOS VALUES(223,'IG-116','15/04/2017');
INSERT INTO PRESTAMOS VALUES(223,'IG-117','17/04/2014');

INSERT INTO PRESTAMOS VALUES(226,'IG-114','13/05/2016');
INSERT INTO PRESTAMOS VALUES(226,'IG-115','15/02/2017');

INSERT INTO PRESTAMOS VALUES(229,'IG-115','17/04/2017');
INSERT INTO PRESTAMOS VALUES(229,'IG-120','18/08/2016');
INSERT INTO PRESTAMOS VALUES(229,'IG-122','18/02/2017');

INSERT INTO PRESTAMOS VALUES(230,'IG-114','10/05/2017');
INSERT INTO PRESTAMOS VALUES(230,'IG-118','17/04/2017');
INSERT INTO PRESTAMOS VALUES(230,'IG-119','19/04/2017');
INSERT INTO PRESTAMOS VALUES(230,'IG-123','20/04/2017');

Commit;

